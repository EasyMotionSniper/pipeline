[req]
default_bits = 2048
prompt = no
default_md = sha256
distinguished_name = dn
x509_extensions = v3_ca  # 启用扩展字段

[dn]
C = CN
ST = Beijing
L = Beijing
O = MyOrg
OU = MyDept
CN = localhost  # 主域名（可选，现代客户端优先看 SAN）

[v3_ca]
# 关键：添加多个 IP 和 DNS（用逗号分隔，或分行写）
subjectAltName = \
    DNS:localhost, \
    DNS:example.com, \
    IP:127.0.0.1, \
    IP:192.168.1.100, \
    IP:10.0.0.5

# 证书用途（服务器端 HTTPS 必须配置）
keyUsage = digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth
basicConstraints = CA:FALSE